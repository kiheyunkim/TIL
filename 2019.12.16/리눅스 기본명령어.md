# 리눅스 기본명령어

### shutdown 

* **shutdown -P +10** : 10분 후에 종료
* **shutdown -r 22:00**: 22시 00분에 종료
* **shutdown -c**: 종료 예약 취소
* **shutdown -k +15**: 현재 접속한 사용자에게 15분 뒤에 종료된다는 메세지를 보냄. 실제로는 종료 안됨.



### logout(텍스트 모드에서는 exit)

로그아웃: 현재 사용자의 접속 끝냄



### 가상 콘솔 전환

Ctrl + Altr + F1 ~ F7



### 런 레벨 (init)

| 런레벨 | 영문 모드  | 설명                           | 비고             |
| ------ | ---------- | ------------------------------ | ---------------- |
| 0      | Power Off  | 종료 모드                      |                  |
| 1      | Rescue     | 시스템 복구 모드               | 단일 사용자 모드 |
| 2      | Multi-User |                                | 사용X            |
| 3      | Multi-User | 텍스트 모드의 다중 사용자 모드 |                  |
| 4      | Multi-User |                                | 사용X            |
| 5      | Graphical  | 그래픽 모드의 다중 사용자 모드 |                  |
| 6      | Reboot     |                                |                  |



### 그래픽 편집기(메모장)

**gedit 파일명**



### 텍스트 편집기

**vi 파일명**

* 명령모드에서 전환하는 키

  | 키   | 설명                             | 키   | 설명                         |
  | ---- | -------------------------------- | ---- | ---------------------------- |
  | i    | 현재 커서 위치부터 입력          | I    | 현재 커서 맨 앞부터 입력     |
  | a    | 현재 커서의 위치 다음칸부터 입력 | A    | 현재 커서 맨 뒤부터 입력     |
  | o    | 현재 커서의 다음줄에 입력        | O    | 현재 커서 이전줄 부터 입력   |
  | s    | 현태커서 위치 한글자 지우고 입력 | S    | 현재 커서의 한줄 지우고 입력 |



* 명령모드에서 커서 이동 키

  | 키     | 설명                      | 키          | 설명                        |
  | ------ | ------------------------- | ----------- | --------------------------- |
  | h      | 커서를 왼쪽으로 한칸 이동 | j           | 커서를 아래로 한칸 이동     |
  | k      | 커서를 위로 한칸 이동     | l           | 커서를 오른쪽으로 한칸 이동 |
  | Ctrl F | 다음 화면으로 이동        | Ctrl+B      | 이전 화면으로 이동          |
  | ^      | 현재 처음 행으로 이동     | $           | 현재 행 마지막으로 이동     |
  | gg     | 첫행으로 이동             | G           | 마지막 행으로 이동          |
  | 숫자G  | 해당 숫자행으로 이동      | :숫자 Enter | 해당 숫자 행으로 이동       |

  

* 명령모드에서 삭제 복사, 붙여넣기

  | 키   | 설명                               | 키     | 설명                                  |
  | ---- | ---------------------------------- | ------ | ------------------------------------- |
  | x    | del과 같음                         | X      | backsapce와 같음                      |
  | dd   | 현재커서의 행 삭제                 | 숫자dd | 현재 커서부터 숫자만큼의 행 삭제      |
  | yy   | 현재 커서가 있는 행 복사           | 숫자yy | 현재 커서부터 숫자만큼 행 복사        |
  | p    | 복사한 내용을 현재행 이후 붙여넣기 | P      | 복사한 내용을 현재 행 이전에 붙여넣음 |

  

* 명령 모드에서 문자열 찾기

  | 키            | 설명                          | 키   | 설명                              |
  | ------------- | ----------------------------- | ---- | --------------------------------- |
  | /문자열+Enter | 해당 문자열을 찾음(커서 이후) | n    | 찾은 문자 중에서 다음 문자로 이동 |

  

* **:set number** : 행 번호 표시



### 도움말

**man <명령어>**



### 디렉토리 관련 명령

* **cd 위치**: 지정한 위치로 이동
* **pwd**: 현재 디렉터리 출력
* **ls**: 파일 목록 출력
* **cp  복사대상 복사위치**: 복사대상을 복사위치로 복사한다
* **rm 대상** : 대상을 삭제
* **rmdir 대상**: 대상 디렉토리를 삭제
* **mkdir 이름**: 해당 이름의 디렉토리를 만든다.
* **touch 이름** : 이름을 가진 새파일 생성, 있으면 최종 수정 시간 변경



### 파일 관련

##### 파일의 접근은 파일의 권한을 줄 뿐만 아니라 해당 파일의 디렉토리들의 권한도 만족해야 접근할 수 있다.

* **chmod 파일이름**: 특정 파일의 권한을 설정한다.
* **chown 사용자파일**: 파일의 소유권을 사용자로 변경한다.
* **chgrp 그룹명 파일**: 파일의 소유그룹을 그룹명으로 변경



### 파일 내용 관련

* **cat 파일명**: 파일의 내용을 화면에 보여줌
* **head, tail**: 파일의 앞 10행 또는 마지막 10행을 보여준다.
* **more**: 텍스트 형식으로 작성된 파일을 페이지 단위로 화면에 출력
* **less**: more과 비슷하나 기능이 확장됨, more에서 되는것을 포함하고 화살표 Page Up down도 사용가능
* **file**: 어떤 종류의 파일인지 확인함



### 링크

하드링크생성: **in 링크대상파일이름 링크파일이름** 

소프트링크생성: **in -s 링크대상파일이름 링크파일이름**

* 하드링크:  원본 파일이라 불리는 것도 하드 링크다, inode에 이미 데이터가 저장되어있는데 하드링크의 개수가 0이 되는순간 dellocation이 된다고 한다.
* 심볼릭 링크: 윈도우의 바로가기와 같은 역할이다. 하드링크와는 다르게 원본이 사라지면 



### 종료 관련

* halt -p 종료
* reboot 재시작



### 콘솔 관련

* **clear**: 콘솔의 내용을 모두 지움





### 사용자 관련

* **adduser [username]**: 사용자 추가
* **passwd**: 사용자의 비밀번호를 변경
* **usermod**: 사용자의 속성을 변경
* **userdel**: 사용자를 삭제
* **change**: 암호를 주기적으로 변경하도록 설정한다.
* **groups**: 사용자 소속 그룹을 보여줌
* **groupadd** [그룹명]: 그룹 추가
* **groupmod**: 그릅의 속성을 변경한다.
* **groupdel**: 그룹을 삭제한다.
* **gpasswd**: 그룹의 암호를 설정하거나, 그룹 관리를 수행한다.



### 패키지 관련

패키지의 형태는

```
패키지이름_버전-개정번호_이키텍처.deb
```

의 이름을 갖는다.



### dpkg

ubuntu에서 패키지를 설치하기 위한 명령어

* **dpkg -i 패키지이름.deb** 



dpkg의 문제점: 각 패키지간의 의존성 문제가 있을 때 설치가 되지 않는다는 문제가 있음. 이를 해결하기 위해서 나온 명령어가 apt-get 명령어이다.



### apt-get 

* **apt-get install 패키지이름**

  패키지 설치시에 먼저 설치해야하는 패키지를 알아서 설치해주어 의존성 문제를 해결한다.

  apt-get 명령어가 인터넷 어디에서 패키지를 조회해 볼 것인가 주소를 지정해주는 파일은 /etc/apt/sources.list에 있다.



### 파일 압축

압축 확장자 xz,bzip2, gzip, zip/unzip

> **xz 파일이름**:  압축파일 만듬
>
> **xz -d 파일이름.xz**:  압축해제해서 파일이름으로 만듦
>
> **xz -l 파일이름.xz**: 압축 파일에 포함된 파일 목록과 압축률등을 출력
>
> **xz -k 파일이름**: 압축 후에 기존 파일을 삭제하지 않고 그대로 둠

이외의 명령어들도 이와 유사



### 파일 묶기

윈도우는 파일 묶기와 파일 압축을 동시에 해줌. 하지만 리눅스에서는 두개를 별개의 프로그램으로 실행한다. 파일 묶기에는 명령어 tar을 이용하고 .tar의 확장자를 갖는다.



tar에 f 옵션은 필수다. 원래 tar이 테이브 장치 백업이 기본이기 떄문에 생략하면 테이프로 보내져 버림





### 파일 위치 검색

find 경로 옵션 조건 action

ex) **find /etc -name "*.conf"**



### CRON과 AT

시스템  작업을 예약 해놓것것을 cron이라고 부른다. 

```
명령 형태
분 시 일 월 요일 사용자 실행명령

사용예
00 05 1 * * root cp -r /home /backup 
여기서 *은 모든을 뜻한다.

의미
매월 1일 새벽 5시 00분 무슨 요일이든 실행하며 root의 권한으로 cp -r /home /backup를 실행한다.
```



일회성 작업을 예약하는 것은 at으로 부를 수 있다.

```
at 4:00 am tomorrow
at> 명령입력
```



### 방화벽 설정

**ufw enable** 방화벽 컴

**ufw allow port** 특정 포트 허용

**ufw deny port** 특정 포트 차단

**ufw disable** 방화벽 끔



### 네트워크 설정 창

**nm-connection-editor**



### IP 주소 resolving

**nslookup**



### 파이프, 필터, 리디렉션

> 파이프: 2개의 프로그램을 연결해주는 연결통로
>
> **ls -l /etc | less**  -> /etc 의 경로를 보여주는데 (less  한  페이지씩) 보여준다.
>
> 
>
>
> 필터: 필요한 것만 걸러주는 명령어. grep, tail, wc, sort, awk, sed
>
> **ps -ef | grep bash**  -> ps -ef를 하면 모든 프로세스 번호를 출력한다. 그중에서  bash가 포함된 것들만 거름
>
>
> 리디렉션: 표준 입출력의 방향을 바꿔준다. 표춘 출력이란 모니터 출력인데 이를 파일로 처리할 때 주로 사용한다.
>
> **ls -l >  list.txt**   -> ls -l의 내용을 list.txt에 덮어쓴다
>
> **ls -l >> list.txt** -> list.txt의 내용에 ls -l 내용을 append 한다.
>
> **sort < list.txt > out.txt**   -> list.txt 파일을 정렬해서 화면에 출력하고 out.txt 파일에 쓴다.



### 프로세스 관련

**ps**: 현재 프로세스 상태를 확인한다

**kill**: 프로세스를 강제로 종료한다. -9 옵션을 주면 무한 루프를 도는 프로세스를 종료할 수 있다.

**pstree**: 부모프로세스와 자식 프로세스의 관계를 트리 형태로 보여준다.



### 서비스관련

서비스를 데몬이라고도 불리며 서버 프로세스를 말한다. 서비스는 눈에 보이지는 않지만 현재 시스템에서 동작 중인 프로세스이므로 백그라운드 프로세스의 일종으로 볼 수 있다.

**systemctl start/stop/restart 서비스이름** : 서비스 시작/중지/재시작

**systemctl status 서비스이름**: 서비스의 상태

**systemctl enable/disable 서비스이름**: 서비스 활성화/비활성화

서비스의 실행 스크립트 파일은 **/lib/systemd/system/** 디렉터리에 **서비스이름.service**라는 이름으로 확인가능

